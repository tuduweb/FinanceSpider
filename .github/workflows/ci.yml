name: Finance Spider
on:
  push:
  schedule:
  - cron:  '30 5,17 * * *'

jobs:
  spider-xueqiu:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@master
    - uses: actions/setup-python@v4
      with:
        python-version: '3.9'
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r ./requirements.txt
    - name: Run my script
      run: |
        python ./xueqiu/spider.py SZ002585 output.out
    - name: Cat File
      run: result=$(cat res_result.out)
    - name: Run DataSaver
      run: python ./CI/github/dataSaver.py ${{ secrets.BOT_TOKENS }} $result